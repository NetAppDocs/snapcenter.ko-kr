---
permalink: protect-scsql/reference_types_of_restore_operations.html 
sidebar: sidebar 
keywords: SnapCenter Plug-in for SQL Server 
summary: SnapCenter를 사용하여 SQL Server 리소스에 대해 다양한 유형의 복원 작업을 수행할 수 있습니다. 
---
= 복원 작업의 유형입니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenter를 사용하여 SQL Server 리소스에 대해 다양한 유형의 복원 작업을 수행할 수 있습니다.

* 최신 상태로 복원합니다
* 이전 시점으로 복원합니다


다음과 같은 경우 최대 1분을 복원하거나 이전 시점으로 복원할 수 있습니다.

* SnapMirror 또는 SnapVault 2차 스토리지에서 복원합니다
* 대체 경로(위치)로 복원



NOTE: SnapCenter는 볼륨 기반 SnapRestore를 지원하지 않습니다.



== 최대 1분 내에 복원합니다

최신 복원 작업(기본적으로 선택됨)에서는 데이터베이스가 장애 지점까지 복구됩니다. SnapCenter는 다음 시퀀스를 실행하여 이를 수행합니다.

. 데이터베이스를 복구하기 전에 마지막 활성 트랜잭션 로그를 백업합니다.
. 선택한 전체 데이터베이스 백업에서 데이터베이스를 복원합니다.
. 데이터베이스에 커밋되지 않은 모든 트랜잭션 로그를 적용합니다(백업이 생성된 시간부터 최신 시간까지 백업의 트랜잭션 로그 포함).
+
트랜잭션 로그가 앞으로 이동되어 선택한 데이터베이스에 적용됩니다.



최신 복원 작업을 수행하려면 일련의 트랜잭션 로그가 필요합니다.

SnapCenter는 로그 전달 백업 파일에서 SQL Server 데이터베이스 트랜잭션 로그를 복원할 수 없으므로(로그 전달을 사용하면 운영 서버 인스턴스의 기본 데이터베이스에서 별도의 보조 서버 인스턴스의 하나 이상의 보조 데이터베이스로 트랜잭션 로그 백업을 자동으로 보낼 수 있음), 트랜잭션 로그 백업에서 최신 복원 작업을 수행할 수 없습니다. 따라서 SnapCenter를 사용하여 SQL Server 데이터베이스 트랜잭션 로그 파일을 백업해야 합니다.

모든 백업에 대해 최신 복원 기능을 유지할 필요가 없는 경우 백업 정책을 통해 시스템의 트랜잭션 로그 백업 보존을 구성할 수 있습니다.



== 최신 복원 작업의 예

매일 정오와 수요일 오후 4시에 SQL Server 백업을 실행한다고 가정합니다 백업에서 복원해야 합니다. 어떤 이유로 수요일 정오의 백업이 검증에 실패하여 화요일 정오 백업으로부터 복원하기로 결정했습니다. 그런 다음 백업이 복원되면 모든 트랜잭션 로그가 앞으로 이동되어 복구된 데이터베이스에 적용됩니다. 화요일 백업을 생성할 때 커밋되지 않은 로그부터 시작하여 수요일 오후 4시에 작성된 최신 트랜잭션 로그를 계속 진행합니다 (트랜잭션 로그가 백업된 경우)



== 이전 시점으로 복원합니다

시점 복원 작업에서는 데이터베이스가 과거의 특정 시간으로만 복원됩니다. 시점 복원 작업은 다음과 같은 복원 상황에서 수행됩니다.

* 데이터베이스는 백업된 트랜잭션 로그에서 지정된 시간으로 복원됩니다.
* 데이터베이스가 복원되고 백업된 트랜잭션 로그의 하위 집합만 데이터베이스에 적용됩니다.



NOTE: 데이터베이스를 특정 시점으로 복원하면 새 복구 경로가 생성됩니다.

다음 이미지는 시점 복원 작업을 수행할 때의 문제를 보여 줍니다.

image::../media/point_in_time_recovery_path.gif[이전 시점으로 복원합니다]

이미지에서 복구 경로 1은 전체 백업과 여러 트랜잭션 로그 백업으로 구성됩니다. 데이터베이스를 특정 시점으로 복원합니다. 새 트랜잭션 로그 백업은 시점 복원 작업 후에 생성되며, 이로 인해 복구 경로 2가 생성됩니다. 새 트랜잭션 로그 백업은 새 전체 백업을 생성하지 않고 생성됩니다. 데이터 손상 또는 기타 문제로 인해 새 전체 백업을 생성할 때까지 현재 데이터베이스를 복원할 수 없습니다. 또한 복구 경로 2에서 생성된 트랜잭션 로그를 복구 경로 1에 속한 전체 백업에 적용할 수 없습니다.

트랜잭션 로그 백업을 적용하는 경우 백업된 트랜잭션의 응용 프로그램을 중지할 특정 날짜 및 시간을 지정할 수도 있습니다. 이렇게 하려면 사용 가능한 범위 내에서 날짜 및 시간을 지정하면 SnapCenter에서 해당 시점 이전에 커밋되지 않은 모든 트랜잭션을 제거합니다. 이 방법을 사용하여 손상이 발생하기 전의 시점으로 데이터베이스를 복원하거나 실수로 데이터베이스를 삭제하거나 테이블을 삭제한 경우 복구할 수 있습니다.



== 시점 복원 작업의 예

자정에 전체 데이터베이스 백업을 한 번, 매시간마다 트랜잭션 로그 백업을 한 번 수행한다고 가정해 보겠습니다. 오전 9시 45분에 데이터베이스가 크래시되지만 오류가 발생한 데이터베이스의 트랜잭션 로그는 여전히 백업되어 있습니다. 다음 시점 복원 시나리오 중 하나를 선택할 수 있습니다.

* 자정에 만든 전체 데이터베이스 백업을 복원하고 이후에 변경된 데이터베이스 내용을 잃게 됩니다. (옵션: 없음)
* 전체 데이터베이스 백업을 복원하고 오전 9시 45분까지 모든 트랜잭션 로그 백업을 적용합니다 (옵션: 로그 종료)
* 전체 데이터베이스 백업을 복원하고 트랜잭션 로그 백업을 적용하여 트랜잭션을 마지막 트랜잭션 로그 백업 세트에서 복원할 시간을 지정합니다. (옵션: 특정 시간별)


이 경우 특정 오류가 보고된 날짜와 시간을 계산합니다. 지정된 날짜 및 시간 이전에 커밋되지 않은 모든 트랜잭션이 제거됩니다.
