---
permalink: protect-sco/task_create_backup_policies_for_oracle_database.html 
sidebar: sidebar 
keywords: backup policies, policies 
summary: SnapCenter를 사용하여 Oracle 데이터베이스 리소스를 백업하기 전에 백업하려는 리소스 또는 리소스 그룹에 대한 백업 정책을 만들어야 합니다. 백업 정책은 백업을 관리, 예약 및 유지하는 방법을 제어하는 규칙의 집합입니다. 복제, 스크립트 및 백업 유형 설정을 지정할 수도 있습니다. 정책을 만들면 다른 리소스 또는 리소스 그룹에서 정책을 다시 사용하려는 시간이 절약됩니다. 
---
= Oracle 데이터베이스에 대한 백업 정책을 생성합니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
SnapCenter를 사용하여 Oracle 데이터베이스 리소스를 백업하기 전에 백업하려는 리소스 또는 리소스 그룹에 대한 백업 정책을 만들어야 합니다. 백업 정책은 백업을 관리, 예약 및 유지하는 방법을 제어하는 규칙의 집합입니다. 복제, 스크립트 및 백업 유형 설정을 지정할 수도 있습니다. 정책을 만들면 다른 리소스 또는 리소스 그룹에서 정책을 다시 사용하려는 시간이 절약됩니다.

* 시작하기 전에 *

* 백업 전략을 정의해야 합니다.
* SnapCenter 설치, 호스트 추가, 데이터베이스 검색 및 스토리지 시스템 접속 생성과 같은 작업을 완료하여 데이터 보호를 위한 준비를 갖추어야 합니다.
* 미러 또는 소산 2차 스토리지에 스냅샷을 복제하는 경우, SnapCenter 관리자가 소스 볼륨과 타겟 볼륨 모두에 대해 SVM을 할당해야 합니다.
* 플러그인을 비루트 사용자로 설치한 경우, prescpt 및 PostScript 디렉토리에 실행 권한을 수동으로 할당해야 합니다.
* SnapMirror 활성 동기화에 대한 사전 요구사항 및 제한 사항을 검토하십시오. 자세한 내용은 을 https://docs.netapp.com/us-en/ontap/smbc/considerations-limits.html#volumes["SnapMirror 활성 동기화에 대한 개체 제한"]참조하십시오.


.이 작업에 대해
'특정 기간 동안 백업 복사본 유지' 옵션을 선택한 경우 SnapLock 보존 기간은 언급된 보존 일수보다 작거나 같아야 합니다.

스냅샷 잠금 기간을 지정하면 보존 기간이 만료될 때까지 스냅샷이 삭제되지 않습니다. 이로 인해 정책에 지정된 개수보다 많은 수의 스냅샷이 보존될 수 있습니다.

ONTAP 9.12.1 이하 버전의 경우 복원의 일부로 SnapLock Vault 스냅샷에서 생성된 복제본은 SnapLock Vault 만료 시간을 상속받습니다. 스토리지 관리자는 SnapLock 만료 시간 이후에 복제본을 수동으로 정리해야 합니다.

* 단계 *

. 왼쪽 탐색 창에서 * 설정 * 을 클릭합니다.
. 설정 페이지에서 * 정책 * 을 클릭합니다.
. 드롭다운 목록에서 * Oracle Database * 를 선택합니다.
. 새로 만들기 * 를 클릭합니다.
. 이름 페이지에서 정책 이름과 세부 정보를 입력합니다.
. 정책 유형 페이지에서 다음 단계를 수행합니다.
+
.. 저장소 유형을 선택합니다.
.. 정책 범위 선택:
+
*** 온라인 백업 * 을 만들려면 * 온라인 백업 * 을 선택합니다.
+
모든 데이터 파일, 제어 파일, 아카이브 로그 파일을 백업할지, 데이터 파일과 제어 파일만 백업할지, 아카이브 로그 파일만 백업할지를 지정해야 합니다.

*** 오프라인 백업 * 을 만들려면 * 오프라인 백업 * 을 선택한 후 다음 옵션 중 하나를 선택합니다.
+
**** 데이터베이스가 마운트된 상태일 때 오프라인 백업을 생성하려면 * Mount * 를 선택합니다.
**** 데이터베이스를 종료 상태로 변경하여 오프라인 종료 백업을 만들려면 * 종료 * 를 선택합니다.
+
플러깅 지원 데이터베이스(PDB)가 있고 백업을 생성하기 전에 PDB의 상태를 저장하려면 * Save state of PDB * 를 선택해야 합니다. 이렇게 하면 백업을 생성한 후 PDB를 원래 상태로 가져올 수 있습니다.





.. Oracle RMAN(Recovery Manager)을 사용하여 백업 카탈로그를 작성하려면 * Oracle RMAN(Recovery Manager)을 사용한 카탈로그 백업 * 을 선택합니다.
+
GUI를 사용하거나 SnapCenter CLI 명령 Catalog-SmBackupWithOracleRMAN을 사용하여 한 번에 한 백업의 지연된 카탈로그를 수행할 수 있습니다.

+

NOTE: RAC 데이터베이스의 백업을 카탈로그로 만들려는 경우 해당 데이터베이스에 대해 실행 중인 다른 작업이 없는지 확인합니다. 다른 작업이 실행 중인 경우, 카탈로그 작성 작업이 대기열에 있는 것이 아니라 실패합니다.

.. 백업 후 아카이브 로그를 정리하려면 * 백업 후 아카이브 로그 푸네 * 를 선택합니다.
+

NOTE: 데이터베이스에 구성되지 않은 아카이브 로그 대상에서 아카이브 로그 잘라내기 작업이 건너뜁니다.

+

IMPORTANT: Oracle Standard Edition을 사용하는 경우 아카이브 로그 백업을 수행하는 동안 log_archive_DEST 및 log_archive_duplex_DEST 매개 변수를 사용할 수 있습니다.

+
*** 아카이브 로그 파일을 백업의 일부로 선택한 경우에만 아카이브 로그를 삭제할 수 있습니다.
+

NOTE: 삭제 작업을 성공적으로 수행하려면 RAC 환경의 모든 노드가 모든 아카이브 로그 위치에 액세스할 수 있는지 확인해야 합니다.

+
|===
| 원하는 작업 | 그러면... 


 a| 
모든 아카이브 로그를 삭제합니다
 a| 
Delete all archive logs * 를 선택합니다.



 a| 
오래된 아카이브 로그를 삭제합니다
 a| 
Delete archive logs older than * 을 선택한 다음 일 및 시간 내에 삭제할 아카이브 로그의 기간을 지정합니다.



 a| 
모든 대상에서 아카이브 로그를 삭제합니다
 a| 
모든 대상에서 * 아카이브 로그 삭제 * 를 선택합니다.



 a| 
백업의 일부인 로그 대상에서 아카이브 로그를 삭제합니다
 a| 
백업에 포함된 대상에서 * 아카이브 로그 삭제 * 를 선택합니다.

|===
+
image:../media/sco_backuppolicy_prunning.gif["제거 정책"]





. 스냅샷 및 복제 페이지에서 다음 단계를 수행합니다.
+
.. On demand *, * Hourly *, * Daily *, * Weekly * 또는 * Monthly * 를 선택하여 일정 빈도를 지정합니다.
+

NOTE: 리소스 그룹을 생성하는 동안 백업 작업의 스케줄(시작 날짜 및 종료 날짜)을 지정할 수 있습니다. 따라서 동일한 정책 및 백업 빈도를 공유하는 리소스 그룹을 생성할 수 있지만, 각 정책에 서로 다른 백업 스케줄을 할당할 수 있습니다.

+

NOTE: 오전 2시에 예약된 경우 DST(일광 절약 시간) 중에는 일정이 트리거되지 않습니다.

.. Data snapshot retention settings 섹션에서 백업 유형 및 백업 유형 페이지에서 선택한 스케줄 유형에 대한 보존 설정을 지정합니다.
+
|===


| 원하는 작업 | 그러면... 


 a| 
특정 수의 스냅샷을 유지합니다
 a| 
유지할 사본 * 을 선택한 다음 유지할 스냅샷 수를 지정합니다.

스냅샷 수가 지정된 수를 초과하면 가장 오래된 복제본이 먼저 삭제되고 스냅샷이 삭제됩니다.


NOTE: 최대 보존 값은 1018입니다. 보존이 기본 ONTAP 버전에서 지원하는 값보다 높은 값으로 설정된 경우 백업이 실패합니다.


IMPORTANT: SnapVault 복제를 설정하려면 보존 수를 2 이상으로 설정해야 합니다. 보존 횟수를 1로 설정하면 새 스냅샷이 타겟으로 복제될 때까지 첫 번째 스냅샷이 SnapVault 관계에 대한 참조 스냅샷이기 때문에 보존 작업이 실패할 수 있습니다.



 a| 
스냅샷을 특정 기간 동안 보관합니다
 a| 
복제본 유지 기간 * 을 선택한 다음 스냅샷을 삭제하기 전에 보존할 일 수를 지정합니다.



 a| 
스냅샷 복사 잠금 기간
 a| 
*스냅샷 복사 잠금 기간*을 선택하고 기간을 일, 월 또는 년 단위로 지정합니다.

SnapLock 보존 기간은 100년 미만이어야 합니다.

|===
.. 아카이브 로그 스냅숏 보존 설정 섹션에서 백업 유형 및 백업 유형 페이지에서 선택한 일정 유형에 대한 보존 설정을 지정합니다.
+
|===


| 원하는 작업 | 그러면... 


 a| 
특정 수의 스냅샷을 유지합니다
 a| 
유지할 사본 * 을 선택한 다음 유지할 스냅샷 수를 지정합니다.

스냅샷 수가 지정된 수를 초과하면 가장 오래된 복제본이 먼저 삭제되고 스냅샷이 삭제됩니다.


NOTE: 최대 보존 값은 1018입니다. 보존이 기본 ONTAP 버전에서 지원하는 값보다 높은 값으로 설정된 경우 백업이 실패합니다.


IMPORTANT: SnapVault 복제를 설정하려면 보존 수를 2 이상으로 설정해야 합니다. 보존 횟수를 1로 설정하면 새 스냅샷이 타겟으로 복제될 때까지 첫 번째 스냅샷이 SnapVault 관계에 대한 참조 스냅샷이기 때문에 보존 작업이 실패할 수 있습니다.



 a| 
스냅샷을 특정 기간 동안 보관합니다
 a| 
복제본 유지 기간 * 을 선택한 다음 스냅샷을 삭제하기 전에 보존할 일 수를 지정합니다.



 a| 
스냅샷 복사 잠금 기간
 a| 
*스냅샷 복사 잠금 기간*을 선택하고 기간을 일, 월 또는 년 단위로 지정합니다.

SnapLock 보존 기간은 100년 미만이어야 합니다.

|===
.. 정책 레이블을 선택합니다.
+

NOTE: 원격 복제를 위해 기본 스냅샷에 SnapMirror 레이블을 할당하면 기본 스냅샷이 SnapCenter 에서 ONTAP 보조 시스템으로 스냅샷 복제 작업을 오프로드할 수 있습니다.  정책 페이지에서 SnapMirror 또는 SnapVault 옵션을 활성화하지 않고도 이 작업을 수행할 수 있습니다.



. Select secondary replication options 섹션에서 다음 보조 복제 옵션 중 하나 또는 둘 다를 선택합니다.
+

NOTE: 2차 스냅샷 복사본 잠금 기간 * 에 대한 2차 복제 옵션을 선택해야 적용됩니다.

+
|===
| 이 필드의 내용... | 수행할 작업... 


 a| 
로컬 스냅샷을 생성한 후 SnapMirror를 업데이트합니다
 a| 
다른 볼륨에 백업 세트의 미러 복사본을 생성하려면 이 필드를 선택합니다(SnapMirror 복제).

이 옵션은 SnapMirror 액티브 동기화에 대해 활성화해야 합니다.

보조 복제 중에 SnapLock 만료 시간에 운영 SnapLock 만료 시간이 로드됩니다.

토폴로지 페이지에서 * 새로 고침 * 버튼을 클릭하면 ONTAP에서 검색된 2차 및 1차 SnapLock 만료 시간이 새로 고쳐집니다.



 a| 
로컬 스냅샷을 생성한 후 SnapVault를 업데이트합니다
 a| 
디스크 간 백업 복제(SnapVault 백업)를 수행하려면 이 옵션을 선택합니다.

SnapLock가 SnapLock 볼트라고 하는 ONTAP의 보조 버전에서만 구성된 경우 토폴로지 페이지에서 * 새로 고침 * 버튼을 클릭하면 ONTAP에서 검색된 보조 시스템의 잠금 기간이 새로 고쳐집니다.

SnapLock 볼트에 대한 자세한 내용은 을 참조하십시오 https://docs.netapp.com/us-en/ontap/snaplock/commit-snapshot-copies-worm-concept.html["볼트 대상에서 WORM에 스냅샷 복사본을 커밋합니다"]

을 link:../protect-sco/task_view_oracle_databse_backups_and_clones_in_the_topology_page.html["토폴로지 페이지에서 Oracle 데이터베이스 백업 및 클론 보기"]참조하십시오.



 a| 
오류 재시도 횟수입니다
 a| 
작업이 중지되기 전에 허용되는 최대 복제 시도 횟수를 입력합니다.

|===
+

NOTE: 보조 스토리지의 최대 스냅샷 한도에 도달하지 않도록 ONTAP에서 보조 스토리지의 SnapMirror 보존 정책을 구성해야 합니다.

. 스크립트 페이지에서 백업 작업 전후에 실행할 처방인 또는 PS의 경로와 인수를 각각 입력합니다.
+
처방과 소인을 _ /var/opt/snapcenter/spl/scripts_ 또는 이 경로 내의 폴더에 저장해야 합니다. 기본적으로 _/var/opt/snapcenter/SPL/scripts_path가 채워집니다. 스크립트를 저장하기 위해 이 경로 내에 폴더를 만든 경우 경로에 해당 폴더를 지정해야 합니다.

+
스크립트 시간 초과 값을 지정할 수도 있습니다. 기본값은 60초입니다.

+
SnapCenter에서는 처방과 PS를 실행할 때 미리 정의된 환경 변수를 사용할 수 있습니다. link:../protect-sco/predefined-environment-variables-prescript-postscript-backup.html["자세한 정보"^]

. 확인 페이지에서 다음 단계를 수행하십시오.
+
.. 검증 작업을 수행할 백업 스케줄을 선택합니다.
.. 검증 스크립트 명령 섹션에서 검증 작업 전후에 실행할 처방인 또는 PS의 경로와 인수를 각각 입력합니다.
+
처방과 소인을 _ /var/opt/snapcenter/spl/scripts_ 또는 이 경로 내의 폴더에 저장해야 합니다. 기본적으로 _/var/opt/snapcenter/SPL/scripts_path가 채워집니다. 스크립트를 저장하기 위해 이 경로 내에 폴더를 만든 경우 경로에 해당 폴더를 지정해야 합니다.

+
스크립트 시간 초과 값을 지정할 수도 있습니다. 기본값은 60초입니다.



. 요약을 검토하고 * Finish * 를 클릭합니다.

